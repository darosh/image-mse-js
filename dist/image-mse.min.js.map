{"version":3,"sources":["image-mse.min.js","/source/image-mse.min.js"],"names":["f","exports","module","define","g","window","global","ImageMSE","self","this","e","s","require","u","n","a","o","t","i","code","Error","call","l","r","length",1,"compare","image2","luminance","a2","image1","a1","sum","data","channels","Math","pow","pc","mse","psnr","max","log10","value","log","LN10"],"mappings":"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","file":"image-mse.min.js","sourcesContent":["!function(a){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=a();else if(\"function\"==typeof define&&define.amd)define([],a);else{var t;t=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,t.ImageMSE=a()}}(function(){return function a(t,e,n){function o(d,f){if(!e[d]){if(!t[d]){var i=\"function\"==typeof require&&require;if(!f&&i)return i(d,!0);if(r)return r(d,!0);var l=new Error(\"Cannot find module '\"+d+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l}var s=e[d]={exports:{}};t[d][0].call(s.exports,function(a){var e=t[d][1][a];return o(e?e:a)},s,s.exports,a,t,e,n)}return e[d].exports}for(var r=\"function\"==typeof require&&require,d=0;d<n.length;d++)o(n[d]);return o}({1:[function(a,t,e){var n;!function(a){\"use strict\";function t(a,t,n){void 0===n&&(n=!0);var o,r,d,f=0,i=a.data.length;if(1===a.channels)for(o=0;i>o;o+=a.channels)f+=Math.pow(a.data[o]-t.data[o],2);else if(2===a.channels)for(o=0;i>o;o+=a.channels)f+=Math.pow(a.data[o]*a.data[o+1]/255-t.data[o]*t.data[o-1]/255,2);else if(3!==a.channels||n)if(3===a.channels&&n)for(o=0;i>o;o+=a.channels)f+=Math.pow(.212655*a.data[o]-.212655*t.data[o],2),f+=Math.pow(.715158*a.data[o+1]-.715158*t.data[o+1],2),f+=Math.pow(.072187*a.data[o+2]-.072187*t.data[o+2],2);else if(4!==a.channels||n){if(4===a.channels&&n)for(o=0;i>o;o+=a.channels)r=a.data[o+3]/255,d=t.data[o+3]/255,f+=Math.pow(.212655*a.data[o]*r-.212655*t.data[o]*d,2),f+=Math.pow(.715158*a.data[o+1]*r-.715158*t.data[o+1]*d,2),f+=Math.pow(.072187*a.data[o+2]*r-.072187*t.data[o+2]*d,2)}else for(o=0;i>o;o+=a.channels)r=a.data[o+3]/255,d=t.data[o+3]/255,f+=Math.pow(a.data[o]*r-t.data[o]*d,2),f+=Math.pow(a.data[o+1]*r-t.data[o+1]*d,2),f+=Math.pow(a.data[o+2]*r-t.data[o+2]*d,2);else for(o=0;i>o;o+=a.channels)f+=Math.pow(a.data[o]-t.data[o],2),f+=Math.pow(a.data[o+1]-t.data[o+1],2),f+=Math.pow(a.data[o+2]-t.data[o+2],2);var l=i;3!==a.channels&&4!==a.channels||n||(l*=3);var s=f/l;return{mse:s,psnr:e(s)}}function e(a,t){return void 0===t&&(t=255),10*n(t*t/a)}function n(a){return Math.log(a)/Math.LN10}a.compare=t}(n||(n={})),t.exports=n},{}]},{},[1])(1)});\n//# sourceMappingURL=image-mse.min.js.map","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.ImageMSE = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar ImageMSE;\n(function (ImageMSE) {\n    'use strict';\n    function compare(image1, image2, luminance) {\n        if (luminance === void 0) { luminance = true; }\n        var sum = 0;\n        var l = image1.data.length;\n        var i;\n        var a1;\n        var a2;\n        if (image1.channels === 1) {\n            for (i = 0; i < l; i += image1.channels) {\n                sum += Math.pow(image1.data[i] - image2.data[i], 2);\n            }\n        }\n        else if (image1.channels === 2) {\n            for (i = 0; i < l; i += image1.channels) {\n                sum += Math.pow(image1.data[i] * image1.data[i + 1] / 255 - image2.data[i] * image2.data[i - 1] / 255, 2);\n            }\n        }\n        else if (image1.channels === 3 && !luminance) {\n            for (i = 0; i < l; i += image1.channels) {\n                sum += Math.pow(image1.data[i] - image2.data[i], 2);\n                sum += Math.pow(image1.data[i + 1] - image2.data[i + 1], 2);\n                sum += Math.pow(image1.data[i + 2] - image2.data[i + 2], 2);\n            }\n        }\n        else if (image1.channels === 3 && luminance) {\n            for (i = 0; i < l; i += image1.channels) {\n                sum += Math.pow(0.212655 * image1.data[i] - 0.212655 * image2.data[i], 2);\n                sum += Math.pow(0.715158 * image1.data[i + 1] - 0.715158 * image2.data[i + 1], 2);\n                sum += Math.pow(0.072187 * image1.data[i + 2] - 0.072187 * image2.data[i + 2], 2);\n            }\n        }\n        else if (image1.channels === 4 && !luminance) {\n            for (i = 0; i < l; i += image1.channels) {\n                a1 = image1.data[i + 3] / 255;\n                a2 = image2.data[i + 3] / 255;\n                sum += Math.pow(image1.data[i] * a1 - image2.data[i] * a2, 2);\n                sum += Math.pow(image1.data[i + 1] * a1 - image2.data[i + 1] * a2, 2);\n                sum += Math.pow(image1.data[i + 2] * a1 - image2.data[i + 2] * a2, 2);\n            }\n        }\n        else if (image1.channels === 4 && luminance) {\n            for (i = 0; i < l; i += image1.channels) {\n                a1 = image1.data[i + 3] / 255;\n                a2 = image2.data[i + 3] / 255;\n                sum += Math.pow(0.212655 * image1.data[i] * a1 - 0.212655 * image2.data[i] * a2, 2);\n                sum += Math.pow(0.715158 * image1.data[i + 1] * a1 - 0.715158 * image2.data[i + 1] * a2, 2);\n                sum += Math.pow(0.072187 * image1.data[i + 2] * a1 - 0.072187 * image2.data[i + 2] * a2, 2);\n            }\n        }\n        var pc = l;\n        if ((image1.channels === 3 || image1.channels === 4) && !luminance) {\n            pc *= 3;\n        }\n        var mse = sum / pc;\n        return {\n            mse: mse,\n            psnr: psnr(mse)\n        };\n    }\n    ImageMSE.compare = compare;\n    function psnr(mse, max) {\n        if (max === void 0) { max = 255; }\n        return 10 * log10((max * max) / mse);\n    }\n    function log10(value) {\n        return Math.log(value) / Math.LN10;\n    }\n})(ImageMSE || (ImageMSE = {}));\nmodule.exports = ImageMSE;\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}